{
  "name": "Master",
  "desc": "",
  "methods": [
    {
      "name": "owner",
      "readonly": true,
      "args": [],
      "returns": {
        "type": "address"
      }
    },
    {
      "name": "transferOwnership",
      "desc": "Transfers the ownership of the contract to a new owner.Requires the caller to be the current owner.",
      "args": [
        {
          "name": "newOwner",
          "type": "address",
          "desc": "The address of the new owner."
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "deploy",
      "desc": "Deploy a Partner, setting the owner as provided",
      "args": [
        {
          "name": "owner",
          "type": "address"
        }
      ],
      "returns": {
        "type": "address"
      }
    },
    {
      "name": "update",
      "desc": "Allows the owner to update the smart contract",
      "args": [],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "destroy",
      "desc": "Destroy the smart contract, sending all Algo to the owner account. This can only be done if there are no active cards",
      "args": [],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "setWithdrawalRounds",
      "desc": "Set the number of rounds a withdrawal request must wait until being withdrawn",
      "args": [
        {
          "name": "rounds",
          "type": "uint64",
          "desc": "New number of rounds to wait"
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "setEarlyWithdrawalPubkey",
      "desc": "Sets the early withdrawal public key.",
      "args": [
        {
          "name": "pubkey",
          "type": "byte[32]",
          "desc": "The public key to set."
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "partnerCreate",
      "desc": "Creates a partner account and associates it with the provided partner name.Only the owner of the contract can call this function.",
      "args": [
        {
          "name": "mbr",
          "type": "pay",
          "desc": "The PayTxn object representing the payment transaction."
        },
        {
          "name": "partner",
          "type": "string",
          "desc": "The name of the partner."
        }
      ],
      "returns": {
        "type": "address",
        "desc": "The address of the newly created partner account."
      }
    },
    {
      "name": "partnerClose",
      "args": [
        {
          "name": "partner",
          "type": "string"
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "cardCreate",
      "desc": "Create account. This generates a brand new account and funds the minimum balance requirement",
      "args": [
        {
          "name": "mbr",
          "type": "pay"
        },
        {
          "name": "partner",
          "type": "string"
        },
        {
          "name": "cardHolder",
          "type": "address",
          "desc": "Address to have control over asset withdrawals"
        }
      ],
      "returns": {
        "type": "address",
        "desc": "Newly generated account used by their card"
      }
    },
    {
      "name": "cardClose",
      "desc": "Close account. This permanently removes the rekey and deletes the account from the ledger",
      "args": [
        {
          "name": "partner",
          "type": "string",
          "desc": "Funding Channel name"
        },
        {
          "name": "cardHolder",
          "type": "address",
          "desc": "Address which has control over asset withdrawals"
        },
        {
          "name": "card",
          "type": "address",
          "desc": "Address to close"
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "cardRecover",
      "desc": "Recovers funds from an old card and transfers them to a new card.Only the owner of the contract can perform this operation.",
      "args": [
        {
          "name": "partner",
          "type": "string",
          "desc": "The partner associated with the cards."
        },
        {
          "name": "oldCardHolder",
          "type": "address",
          "desc": "The address of the old card holder."
        },
        {
          "name": "newCardHolder",
          "type": "address",
          "desc": "The address of the new card holder."
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "assetAllowlistAdd",
      "desc": "Allows the master contract to flag intent of accepting an asset.This can be considered the whitelists whitelist.",
      "args": [
        {
          "name": "mbr",
          "type": "pay",
          "desc": "Payment transaction of minimum balance requirement"
        },
        {
          "name": "asset",
          "type": "uint64",
          "desc": "The AssetID of the asset being transferred."
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "assetAllowlistRemove",
      "desc": "Allows the master contract to reject accepting an asset.",
      "args": [
        {
          "name": "asset",
          "type": "uint64",
          "desc": "The AssetID of the asset being transferred."
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "partnerAcceptAsset",
      "desc": "Allows the specified asset to be transferred for users of this partner.",
      "args": [
        {
          "name": "mbr",
          "type": "pay",
          "desc": "The PayTxn object representing the transaction."
        },
        {
          "name": "partner",
          "type": "string"
        },
        {
          "name": "asset",
          "type": "uint64",
          "desc": "The ID of the asset to be allowed."
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "partnerRejectAsset",
      "desc": "Revokes an asset by closing out its balance and transferring the minimum balance to the sender.",
      "args": [
        {
          "name": "partner",
          "type": "string"
        },
        {
          "name": "asset",
          "type": "uint64",
          "desc": "The ID of the asset to revoke."
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "cardDebit",
      "desc": "Debits the specified amount of the given asset from the card account.Only the owner of the contract can perform this operation.",
      "args": [
        {
          "name": "card",
          "type": "address",
          "desc": "The card account from which the asset will be debited."
        },
        {
          "name": "asset",
          "type": "uint64"
        },
        {
          "name": "amount",
          "type": "uint64",
          "desc": "The amount of the asset to be debited."
        }
      ],
      "returns": {
        "type": "void"
      },
      "events": [
        {
          "name": "Debit",
          "args": [
            {
              "name": "card",
              "type": "address",
              "desc": "Funding Source being debited from"
            },
            {
              "name": "asset",
              "type": "uint64",
              "desc": "Asset being debited"
            },
            {
              "name": "amount",
              "type": "uint64",
              "desc": "Amount being debited"
            }
          ],
          "desc": "Debit event"
        }
      ]
    },
    {
      "name": "cardRefund",
      "desc": "Refunds a specified amount of an asset to a card account.Only the owner of the contract can perform this operation.",
      "args": [
        {
          "name": "partner",
          "type": "string"
        },
        {
          "name": "card",
          "type": "address",
          "desc": "The card account to refund the asset to."
        },
        {
          "name": "asset",
          "type": "uint64"
        },
        {
          "name": "amount",
          "type": "uint64",
          "desc": "The amount of the asset to refund."
        }
      ],
      "returns": {
        "type": "void"
      },
      "events": [
        {
          "name": "Refund",
          "args": [
            {
              "name": "card",
              "type": "address",
              "desc": "Funding Source being refunded to"
            },
            {
              "name": "asset",
              "type": "uint64",
              "desc": "Asset being refunded"
            },
            {
              "name": "amount",
              "type": "uint64",
              "desc": "Amount being refunded"
            }
          ],
          "desc": "Refund event"
        }
      ]
    },
    {
      "name": "settle",
      "desc": "Settles a payment by transferring an asset to the specified recipient.Only the owner of the contract can call this function.",
      "args": [
        {
          "name": "recipient",
          "type": "address",
          "desc": "The address of the recipient."
        },
        {
          "name": "asset",
          "type": "uint64"
        },
        {
          "name": "amount",
          "type": "uint64",
          "desc": "The amount of the asset to be transferred."
        }
      ],
      "returns": {
        "type": "void"
      },
      "events": [
        {
          "name": "Settlement",
          "args": [
            {
              "name": "asset",
              "type": "uint64",
              "desc": "Asset being settled"
            },
            {
              "name": "amount",
              "type": "uint64",
              "desc": "Amount being settled"
            }
          ],
          "desc": "Settlement event"
        }
      ]
    },
    {
      "name": "cardEnableAsset",
      "desc": "Allows the depositor (or owner) to OptIn to an asset, increasing the minimum balance requirement of the account",
      "args": [
        {
          "name": "mbr",
          "type": "pay"
        },
        {
          "name": "partner",
          "type": "string",
          "desc": "Funding Channel name"
        },
        {
          "name": "card",
          "type": "address",
          "desc": "Address to add asset to"
        },
        {
          "name": "asset",
          "type": "uint64",
          "desc": "Asset to add"
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "cardDisableAsset",
      "desc": "Allows the depositor (or owner) to CloseOut of an asset, reducing the minimum balance requirement of the account",
      "args": [
        {
          "name": "partner",
          "type": "string",
          "desc": "The funding channel associated with the card."
        },
        {
          "name": "card",
          "type": "address",
          "desc": "The address of the card."
        },
        {
          "name": "asset",
          "type": "uint64",
          "desc": "The ID of the asset to be removed."
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "cardWithdrawalRequest",
      "desc": "Allows the Card Holder (or contract owner) to send an amount of assets from the account",
      "args": [
        {
          "name": "partner",
          "type": "string",
          "desc": "Funding Channel name"
        },
        {
          "name": "card",
          "type": "address",
          "desc": "Address to withdraw from"
        },
        {
          "name": "recipient",
          "type": "address"
        },
        {
          "name": "asset",
          "type": "uint64",
          "desc": "Asset to withdraw"
        },
        {
          "name": "amount",
          "type": "uint64",
          "desc": "Amount to withdraw"
        }
      ],
      "returns": {
        "type": "byte[32]",
        "desc": "Withdrawal hash used for completing or cancelling the withdrawal"
      }
    },
    {
      "name": "cardWithdrawalCancel",
      "desc": "Allows the Card Holder (or contract owner) to cancel a withdrawal request",
      "args": [
        {
          "name": "partner",
          "type": "string",
          "desc": "Funding Channel name"
        },
        {
          "name": "card",
          "type": "address",
          "desc": "Address to withdraw from"
        },
        {
          "name": "withdrawal_hash",
          "type": "byte[32]",
          "desc": "Hash of the withdrawal request"
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "cardWithdraw",
      "desc": "Allows the Card Holder to send an amount of assets from the account",
      "args": [
        {
          "name": "partner",
          "type": "string",
          "desc": "Funding Channel name"
        },
        {
          "name": "card",
          "type": "address",
          "desc": "Address to withdraw from"
        },
        {
          "name": "withdrawal_hash",
          "type": "byte[32]",
          "desc": "Hash of the withdrawal request"
        }
      ],
      "returns": {
        "type": "void"
      }
    },
    {
      "name": "cardWithdrawEarly",
      "desc": "Withdraws funds before the withdrawal round has lapsed, by using the early withdrawal signature provided by Immersve.",
      "args": [
        {
          "name": "partner",
          "type": "string",
          "desc": "The partner associated with the card."
        },
        {
          "name": "card",
          "type": "address",
          "desc": "The address of the card."
        },
        {
          "name": "withdrawal_hash",
          "type": "byte[32]",
          "desc": "The hash of the withdrawal."
        },
        {
          "name": "early_withdrawal_sig",
          "type": "byte[32]",
          "desc": "The signature for early withdrawal."
        }
      ],
      "returns": {
        "type": "void"
      }
    }
  ],
  "events": [
    {
      "name": "OwnershipTransferred",
      "args": [
        {
          "name": "previousOwner",
          "type": "address",
          "desc": "Previous owner address"
        },
        {
          "name": "newOwner",
          "type": "address",
          "desc": "New owner address"
        }
      ],
      "desc": "Event emitted when ownership of the contract is transferred."
    },
    {
      "name": "CardCreated",
      "args": [],
      "desc": ""
    },
    {
      "name": "Debit",
      "args": [
        {
          "name": "card",
          "type": "address",
          "desc": "Funding Source being debited from"
        },
        {
          "name": "asset",
          "type": "uint64",
          "desc": "Asset being debited"
        },
        {
          "name": "amount",
          "type": "uint64",
          "desc": "Amount being debited"
        }
      ],
      "desc": "Debit event"
    },
    {
      "name": "Refund",
      "args": [
        {
          "name": "card",
          "type": "address",
          "desc": "Funding Source being refunded to"
        },
        {
          "name": "asset",
          "type": "uint64",
          "desc": "Asset being refunded"
        },
        {
          "name": "amount",
          "type": "uint64",
          "desc": "Amount being refunded"
        }
      ],
      "desc": "Refund event"
    },
    {
      "name": "Settlement",
      "args": [
        {
          "name": "asset",
          "type": "uint64",
          "desc": "Asset being settled"
        },
        {
          "name": "amount",
          "type": "uint64",
          "desc": "Amount being settled"
        }
      ],
      "desc": "Settlement event"
    },
    {
      "name": "Withdrawal",
      "args": [
        {
          "name": "card",
          "type": "address",
          "desc": "Funding Source withdrawn from"
        },
        {
          "name": "recipient",
          "type": "address",
          "desc": "Recipient address withdrawn to"
        },
        {
          "name": "asset",
          "type": "uint64",
          "desc": "Asset withdrawn"
        },
        {
          "name": "amount",
          "type": "uint64",
          "desc": "Amount withdrawn"
        },
        {
          "name": "nonce",
          "type": "uint64",
          "desc": "Withdrawal nonce"
        }
      ],
      "desc": "Withdrawal event"
    }
  ]
}